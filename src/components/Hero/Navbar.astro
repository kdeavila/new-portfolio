---
import Download from "@icons/Download.astro";
import Menu from "@icons/Menu.astro";

const LINKS = [
    { title: "Inicio", href: "#home" },
    { title: "Proyectos", href: "#projects" },
    { title: "Acerca de mí", href: "#about" },
    { title: "Contácto", href: "#contact" },
];
---

<nav class="w-full fixed top-0 left-0 right-0 z-[999]" id="navbar">
    <div class="backdrop-blur-md bg-dark/20 border-b border-dark/30">
        <div class="max-w-5xl mx-auto" data-aos="fade-down">
            <div class="flex items-center justify-between py-4 px-10 lg:px-5">
                <span class="inline-flex items-center text-xl font-semibold">
                    kdeavila
                </span>

                <ul class="items-center space-x-6 hidden md:flex">
                    {
                        LINKS.map((link) => (
                            <li class="block">
                                <a
                                    class="font-medium hover:text-neutral-300 transition-colors"
                                    href={link.href}
                                >
                                    {link.title}
                                </a>
                            </li>
                        ))
                    }
                    <li class="block">
                        <a
                            class="font-medium flex items-center gap-1 px-4 py-2 rounded-2xl bg-blue-600 hover:bg-blue-500 transition-colors"
                            download="curriculum.pdf"
                            href="/curriculum.pdf"
                        >
                            Descargar CV
                            <Download size={18} />
                        </a>
                    </li>
                </ul>

                <div class="flex items-center gap-x-4 md:hidden">
                    <a
                        class="font-medium flex items-center gap-1 px-4 py-2 rounded-2xl bg-blue-600 hover:bg-blue-500 transition-colors"
                        download="curriculum.pdf"
                        href="/curriculum.pdf"
                    >
                        Descargar CV
                        <span class="hidden xs:block"
                            ><Download size={18} /></span
                        >
                    </a>

                    <button class="block" id="menu-button">
                        <Menu />
                    </button>
                </div>
            </div>

            <!-- Menu mobile -->
            <div
                class="max-h-0 md:hidden overflow-hidden transition-[max-height] duration-300 ease-in-out"
                id="menu-mobile"
            >
                <ul class="w-full flex flex-col">
                    {
                        LINKS.map((link) => (
                            <li class="block">
                                <a
                                    class="block text-center text-lg font-medium py-4 hover:bg-dark/20 border-t border-b border-transparent hover:border-blue-800 transition-colors"
                                    href={link.href}
                                    id="menu-link"
                                >
                                    {link.title}
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>
    </div>
</nav>

<script>
    const menuButton = document.getElementById("menu-button");
    const menuMobile = document.getElementById("menu-mobile");
    const menuLinks = document.querySelectorAll("#menu-link");

    if (menuButton && menuMobile) {
        menuButton.addEventListener("click", () => {
            if (
                menuMobile.style.maxHeight === "0px" ||
                !menuMobile.style.maxHeight
            ) {
                menuMobile.style.maxHeight = menuMobile.scrollHeight + "px";
            } else {
                menuMobile.style.maxHeight = "0px";
            }
        });

        menuLinks.forEach((link) => {
            link.addEventListener("click", () => {
                menuMobile.style.maxHeight = "0px";
            });
        });
    }
</script>
